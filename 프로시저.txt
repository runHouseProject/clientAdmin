-- Supabase AI is experimental and may produce incorrect answers
-- Always verify the output before executing

 ㅡ<프로시저저장>
get_user_attendance()

SELECT
  u."accountId" AS KEY,
  u.name AS NAME,
  u."birthYear"::INT AS birthYear,
  COUNT(m._id) AS attendance,
  COUNT(
    DISTINCT CASE
      WHEN m.founder = TRUE THEN m._id
    END
  ) AS meetings,
  TO_CHAR(u.created_at, 'YYYY-MM-DD') AS joinDate
FROM
  public."user" u
  LEFT JOIN public.meeting m ON u."accountId" = m."accountId"
GROUP BY
  u."accountId",
  u.name,
  u."birthYear",
  u.created_at